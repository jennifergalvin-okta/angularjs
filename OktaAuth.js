/*!
 * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.
 * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the "License.")
 *
 * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *
 * See the License for the specific language governing permissions and limitations under the License.
 */

/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*!
 *
 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

/*!
  * Reqwest! A general purpose XHR connection manager
  * license MIT (c) Dustin Diaz 2014
  * https://github.com/ded/reqwest
  */

/* Base64.js
 *
 * Copyright 2015 David Chambers
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

!function(e,t){"function"==typeof define&&define.amd?define([],t):e.OktaAuth=t()}(this,function(){var requirejs,require,define;return function(e){function t(e,t){return v.call(e,t)}function n(e,t){var n,r,o,i,s,u,a,c,f,p,l,d=t&&t.split("/"),h=y.map,m=h&&h["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),s=e.length-1,y.nodeIdCompat&&w.test(e[s])&&(e[s]=e[s].replace(w,"")),e=d.slice(0,d.length-1).concat(e),f=0;f<e.length;f+=1)if(l=e[f],"."===l)e.splice(f,1),f-=1;else if(".."===l){if(1===f&&(".."===e[2]||".."===e[0]))break;f>0&&(e.splice(f-1,2),f-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||m)&&h){for(n=e.split("/"),f=n.length;f>0;f-=1){if(r=n.slice(0,f).join("/"),d)for(p=d.length;p>0;p-=1)if(o=h[d.slice(0,p).join("/")],o&&(o=o[r])){i=o,u=f;break}if(i)break;!a&&m&&m[r]&&(a=m[r],c=f)}!i&&a&&(i=a,u=c),i&&(n.splice(0,u,i),e=n.join("/"))}return e}function r(t,n){return function(){var r=g.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),f.apply(e,r.concat([t,n]))}}function o(e){return function(t){return n(t,e)}}function i(e){return function(t){d[e]=t}}function s(n){if(t(h,n)){var r=h[n];delete h[n],m[n]=!0,c.apply(e,r)}if(!t(d,n)&&!t(m,n))throw new Error("No "+n);return d[n]}function u(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function a(e){return function(){return y&&y.config&&y.config[e]||{}}}var c,f,p,l,d={},h={},y={},m={},v=Object.prototype.hasOwnProperty,g=[].slice,w=/\.js$/;p=function(e,t){var r,i=u(e),a=i[0];return e=i[1],a&&(a=n(a,t),r=s(a)),a?e=r&&r.normalize?r.normalize(e,o(t)):n(e,t):(e=n(e,t),i=u(e),a=i[0],e=i[1],a&&(r=s(a))),{f:a?a+"!"+e:e,n:e,pr:a,p:r}},l={require:function(e){return r(e)},exports:function(e){var t=d[e];return"undefined"!=typeof t?t:d[e]={}},module:function(e){return{id:e,uri:"",exports:d[e],config:a(e)}}},c=function(n,o,u,a){var c,f,y,v,g,w,k=[],b=typeof u;if(a=a||n,"undefined"===b||"function"===b){for(o=!o.length&&u.length?["require","exports","module"]:o,g=0;g<o.length;g+=1)if(v=p(o[g],a),f=v.f,"require"===f)k[g]=l.require(n);else if("exports"===f)k[g]=l.exports(n),w=!0;else if("module"===f)c=k[g]=l.module(n);else if(t(d,f)||t(h,f)||t(m,f))k[g]=s(f);else{if(!v.p)throw new Error(n+" missing "+f);v.p.load(v.n,r(a,!0),i(f),{}),k[g]=d[f]}y=u?u.apply(d[n],k):void 0,n&&(c&&c.exports!==e&&c.exports!==d[n]?d[n]=c.exports:y===e&&w||(d[n]=y))}else n&&(d[n]=u)},requirejs=require=f=function(t,n,r,o,i){if("string"==typeof t)return l[t]?l[t](n):s(p(t,n).f);if(!t.splice){if(y=t,y.deps&&f(y.deps,y.callback),!n)return;n.splice?(t=n,n=r,r=null):t=e}return n=n||function(){},"function"==typeof r&&(r=o,o=i),o?c(e,t,n,r):setTimeout(function(){c(e,t,n,r)},4),f},f.config=function(e){return f(e)},requirejs._defined=d,define=function(e,n,r){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");n.splice||(r=n,n=[]),t(d,e)||t(h,e)||(h[e]=[e,n,r])},define.amd={jQuery:!0}}(),define("almond",function(){}),function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("q",e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=e}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var t="undefined"!=typeof window?window:self,n=t.Q;t.Q=e(),t.Q.noConflict=function(){return t.Q=n,this}}}(function(){"use strict";function e(e){return function(){return G.apply(e,arguments)}}function t(e){return e===Object(e)}function n(e){return"[object StopIteration]"===ne(e)||e instanceof J}function r(e,t){if(z&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(re)){for(var n=[],r=t;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(e.stack);var i=n.join("\n"+re+"\n");e.stack=o(i)}}function o(e){for(var t=e.split("\n"),n=[],r=0;r<t.length;++r){var o=t[r];u(o)||i(o)||!o||n.push(o)}return n.join("\n")}function i(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function s(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(e);return r?[r[1],Number(r[2])]:void 0}function u(e){var t=s(e);if(!t)return!1;var n=t[0],r=t[1];return n===F&&r>=Q&&ae>=r}function a(){if(z)try{throw new Error}catch(e){var t=e.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],r=s(n);if(!r)return;return F=r[0],r[1]}}function c(e,t,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+n+" instead.",new Error("").stack),e.apply(e,arguments)}}function f(e){return e instanceof h?e:g(e)?q(e):R(e)}function p(){function e(e){t=e,i.source=e,$(n,function(t,n){f.nextTick(function(){e.promiseDispatch.apply(e,n)})},void 0),n=void 0,r=void 0}var t,n=[],r=[],o=Z(p.prototype),i=Z(h.prototype);if(i.promiseDispatch=function(e,o,i){var s=B(arguments);n?(n.push(s),"when"===o&&i[1]&&r.push(i[1])):f.nextTick(function(){t.promiseDispatch.apply(t,s)})},i.valueOf=function(){if(n)return i;var e=m(t);return v(e)&&(t=e),e},i.inspect=function(){return t?t.inspect():{state:"pending"}},f.longStackSupport&&z)try{throw new Error}catch(s){i.stack=s.stack.substring(s.stack.indexOf("\n")+1)}return o.promise=i,o.resolve=function(n){t||e(f(n))},o.fulfill=function(n){t||e(R(n))},o.reject=function(n){t||e(A(n))},o.notify=function(e){t||$(r,function(t,n){f.nextTick(function(){n(e)})},void 0)},o}function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=p();try{e(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}return t.promise}function d(e){return l(function(t,n){for(var r=0,o=e.length;o>r;r++)f(e[r]).then(t,n)})}function h(e,t,n){void 0===t&&(t=function(e){return A(new Error("Promise does not support operation: "+e))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=Z(h.prototype);if(r.promiseDispatch=function(n,o,i){var s;try{s=e[o]?e[o].apply(r,i):t.call(r,o,i)}catch(u){s=A(u)}n&&n(s)},r.inspect=n,n){var o=n();"rejected"===o.state&&(r.exception=o.reason),r.valueOf=function(){var e=n();return"pending"===e.state||"rejected"===e.state?r:e.value}}return r}function y(e,t,n,r){return f(e).then(t,n,r)}function m(e){if(v(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function v(e){return e instanceof h}function g(e){return t(e)&&"function"==typeof e.then}function w(e){return v(e)&&"pending"===e.inspect().state}function k(e){return!v(e)||"fulfilled"===e.inspect().state}function b(e){return v(e)&&"rejected"===e.inspect().state}function x(){oe.length=0,ie.length=0,ue||(ue=!0)}function j(e,t){ue&&("object"==typeof process&&"function"==typeof process.emit&&f.nextTick.runAfter(function(){-1!==K(ie,e)&&(process.emit("unhandledRejection",t,e),se.push(e))}),ie.push(e),t&&"undefined"!=typeof t.stack?oe.push(t.stack):oe.push("(no stack) "+t))}function T(e){if(ue){var t=K(ie,e);-1!==t&&("object"==typeof process&&"function"==typeof process.emit&&f.nextTick.runAfter(function(){var n=K(se,e);-1!==n&&(process.emit("rejectionHandled",oe[t],e),se.splice(n,1))}),ie.splice(t,1),oe.splice(t,1))}}function A(e){var t=h({when:function(t){return t&&T(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return j(t,e),t}function R(e){return h({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return null===t||void 0===t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return te(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function q(e){var t=p();return f.nextTick(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise}function _(e){return h({isDef:function(){}},function(t,n){return H(e,t,n)},function(){return f(e).inspect()})}function O(e,t,n){return f(e).spread(t,n)}function E(e){return function(){function t(e,t){var s;if("undefined"==typeof StopIteration){try{s=r[e](t)}catch(u){return A(u)}return s.done?f(s.value):y(s.value,o,i)}try{s=r[e](t)}catch(u){return n(u)?f(u.value):A(u)}return y(s,o,i)}var r=e.apply(this,arguments),o=t.bind(t,"next"),i=t.bind(t,"throw");return o()}}function S(e){f.done(f.async(e)())}function C(e){throw new J(e)}function P(e){return function(){return O([this,I(arguments)],function(t,n){return e.apply(t,n)})}}function H(e,t,n){return f(e).dispatch(t,n)}function I(e){return y(e,function(e){var t=0,n=p();return $(e,function(r,o,i){var s;v(o)&&"fulfilled"===(s=o.inspect()).state?e[i]=s.value:(++t,y(o,function(r){e[i]=r,0===--t&&n.resolve(e)},n.reject,function(e){n.notify({index:i,value:e})}))},void 0),0===t&&n.resolve(e),n.promise})}function M(e){if(0===e.length)return f.resolve();var t=f.defer(),n=0;return $(e,function(r,o,i){function s(e){t.resolve(e)}function u(){n--,0===n&&t.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function a(e){t.notify({index:i,value:e})}var c=e[i];n++,y(c,s,u,a)},void 0),t.promise}function N(e){return y(e,function(e){return e=Y(e,f),y(I(Y(e,function(e){return y(e,V,V)})),function(){return e})})}function D(e){return f(e).allSettled()}function U(e,t){return f(e).then(void 0,void 0,t)}function L(e,t){return f(e).nodeify(t)}var z=!1;try{throw new Error}catch(X){z=!!X.stack}var F,J,Q=a(),V=function(){},W=function(){function e(){for(var e,r;n.next;)n=n.next,e=n.task,n.task=void 0,r=n.domain,r&&(n.domain=void 0,r.enter()),t(e,r);for(;u.length;)e=u.pop(),t(e);o=!1}function t(t,n){try{t()}catch(r){if(s)throw n&&n.exit(),setTimeout(e,0),n&&n.enter(),r;setTimeout(function(){throw r},0)}n&&n.exit()}var n={task:void 0,next:null},r=n,o=!1,i=void 0,s=!1,u=[];if(W=function(e){r=r.next={task:e,domain:s&&process.domain,next:null},o||(o=!0,i())},"object"==typeof process&&"[object process]"===process.toString()&&process.nextTick)s=!0,i=function(){process.nextTick(e)};else if("function"==typeof setImmediate)i="undefined"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if("undefined"!=typeof MessageChannel){var a=new MessageChannel;a.port1.onmessage=function(){i=c,a.port1.onmessage=e,e()};var c=function(){a.port2.postMessage(0)};i=function(){setTimeout(e,0),c()}}else i=function(){setTimeout(e,0)};return W.runAfter=function(e){u.push(e),o||(o=!0,i())},W}(),G=Function.call,B=e(Array.prototype.slice),$=e(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}for(;r>n;n++)n in this&&(t=e(t,this[n],n));return t}),K=e(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),Y=e(Array.prototype.map||function(e,t){var n=this,r=[];return $(n,function(o,i,s){r.push(e.call(t,i,s,n))},void 0),r}),Z=Object.create||function(e){function t(){}return t.prototype=e,new t},ee=e(Object.prototype.hasOwnProperty),te=Object.keys||function(e){var t=[];for(var n in e)ee(e,n)&&t.push(n);return t},ne=e(Object.prototype.toString);J="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var re="From previous event:";f.resolve=f,f.nextTick=W,f.longStackSupport=!1,"object"==typeof process&&process&&process.env&&process.env.Q_DEBUG&&(f.longStackSupport=!0),f.defer=p,p.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(B(arguments,1)):e.resolve(n)}},f.Promise=l,f.promise=l,l.race=d,l.all=I,l.reject=A,l.resolve=f,f.passByCopy=function(e){return e},h.prototype.passByCopy=function(){return this},f.join=function(e,t){return f(e).join(t)},h.prototype.join=function(e){return f([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},f.race=d,h.prototype.race=function(){return this.then(f.race)},f.makePromise=h,h.prototype.toString=function(){return"[object Promise]"},h.prototype.then=function(e,t,n){function o(t){try{return"function"==typeof e?e(t):t}catch(n){return A(n)}}function i(e){if("function"==typeof t){r(e,u);try{return t(e)}catch(n){return A(n)}}return A(e)}function s(e){return"function"==typeof n?n(e):e}var u=this,a=p(),c=!1;return f.nextTick(function(){u.promiseDispatch(function(e){c||(c=!0,a.resolve(o(e)))},"when",[function(e){c||(c=!0,a.resolve(i(e)))}])}),u.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=s(e)}catch(r){if(n=!0,!f.onerror)throw r;f.onerror(r)}n||a.notify(t)}]),a.promise},f.tap=function(e,t){return f(e).tap(t)},h.prototype.tap=function(e){return e=f(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},f.when=y,h.prototype.thenResolve=function(e){return this.then(function(){return e})},f.thenResolve=function(e,t){return f(e).thenResolve(t)},h.prototype.thenReject=function(e){return this.then(function(){throw e})},f.thenReject=function(e,t){return f(e).thenReject(t)},f.nearer=m,f.isPromise=v,f.isPromiseAlike=g,f.isPending=w,h.prototype.isPending=function(){return"pending"===this.inspect().state},f.isFulfilled=k,h.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},f.isRejected=b,h.prototype.isRejected=function(){return"rejected"===this.inspect().state};var oe=[],ie=[],se=[],ue=!0;f.resetUnhandledRejections=x,f.getUnhandledReasons=function(){return oe.slice()},f.stopUnhandledRejectionTracking=function(){x(),ue=!1},x(),f.reject=A,f.fulfill=R,f.master=_,f.spread=O,h.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},f.async=E,f.spawn=S,f["return"]=C,f.promised=P,f.dispatch=H,h.prototype.dispatch=function(e,t){var n=this,r=p();return f.nextTick(function(){n.promiseDispatch(r.resolve,e,t)}),r.promise},f.get=function(e,t){return f(e).dispatch("get",[t])},h.prototype.get=function(e){return this.dispatch("get",[e])},f.set=function(e,t,n){return f(e).dispatch("set",[t,n])},h.prototype.set=function(e,t){return this.dispatch("set",[e,t])},f.del=f["delete"]=function(e,t){return f(e).dispatch("delete",[t])},h.prototype.del=h.prototype["delete"]=function(e){return this.dispatch("delete",[e])},f.mapply=f.post=function(e,t,n){return f(e).dispatch("post",[t,n])},h.prototype.mapply=h.prototype.post=function(e,t){return this.dispatch("post",[e,t])},f.send=f.mcall=f.invoke=function(e,t){return f(e).dispatch("post",[t,B(arguments,2)])},h.prototype.send=h.prototype.mcall=h.prototype.invoke=function(e){return this.dispatch("post",[e,B(arguments,1)])},f.fapply=function(e,t){return f(e).dispatch("apply",[void 0,t])},h.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},f["try"]=f.fcall=function(e){return f(e).dispatch("apply",[void 0,B(arguments,1)])},h.prototype.fcall=function(){return this.dispatch("apply",[void 0,B(arguments)])},f.fbind=function(e){var t=f(e),n=B(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(B(arguments))])}},h.prototype.fbind=function(){var e=this,t=B(arguments);return function(){return e.dispatch("apply",[this,t.concat(B(arguments))])}},f.keys=function(e){return f(e).dispatch("keys",[])},h.prototype.keys=function(){return this.dispatch("keys",[])},f.all=I,h.prototype.all=function(){return I(this)},f.any=M,h.prototype.any=function(){return M(this)},f.allResolved=c(N,"allResolved","allSettled"),h.prototype.allResolved=function(){return N(this)},f.allSettled=D,h.prototype.allSettled=function(){return this.then(function(e){return I(Y(e,function(e){function t(){return e.inspect()}return e=f(e),e.then(t,t)}))})},f.fail=f["catch"]=function(e,t){return f(e).then(void 0,t)},h.prototype.fail=h.prototype["catch"]=function(e){return this.then(void 0,e)},f.progress=U,h.prototype.progress=function(e){return this.then(void 0,void 0,e)},f.fin=f["finally"]=function(e,t){return f(e)["finally"](t)},h.prototype.fin=h.prototype["finally"]=function(e){return e=f(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},f.done=function(e,t,n,r){return f(e).done(t,n,r)},h.prototype.done=function(e,t,n){var o=function(e){f.nextTick(function(){if(r(e,i),!f.onerror)throw e;f.onerror(e)})},i=e||t||n?this.then(e,t,n):this;"object"==typeof process&&process&&process.domain&&(o=process.domain.bind(o)),i.then(void 0,o)},f.timeout=function(e,t,n){return f(e).timeout(t,n)},h.prototype.timeout=function(e,t){var n=p(),r=setTimeout(function(){t&&"string"!=typeof t||(t=new Error(t||"Timed out after "+e+" ms"),t.code="ETIMEDOUT"),n.reject(t)},e);return this.then(function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)},n.notify),n.promise},f.delay=function(e,t){return void 0===t&&(t=e,e=void 0),f(e).delay(t)},h.prototype.delay=function(e){return this.then(function(t){var n=p();return setTimeout(function(){n.resolve(t)},e),n.promise})},f.nfapply=function(e,t){return f(e).nfapply(t)},h.prototype.nfapply=function(e){var t=p(),n=B(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},f.nfcall=function(e){var t=B(arguments,1);return f(e).nfapply(t)},h.prototype.nfcall=function(){var e=B(arguments),t=p();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},f.nfbind=f.denodeify=function(e){var t=B(arguments,1);return function(){var n=t.concat(B(arguments)),r=p();return n.push(r.makeNodeResolver()),f(e).fapply(n).fail(r.reject),r.promise}},h.prototype.nfbind=h.prototype.denodeify=function(){var e=B(arguments);return e.unshift(this),f.denodeify.apply(void 0,e)},f.nbind=function(e,t){var n=B(arguments,2);return function(){function r(){return e.apply(t,arguments)}var o=n.concat(B(arguments)),i=p();return o.push(i.makeNodeResolver()),f(r).fapply(o).fail(i.reject),i.promise}},h.prototype.nbind=function(){var e=B(arguments,0);return e.unshift(this),f.nbind.apply(void 0,e)},f.nmapply=f.npost=function(e,t,n){return f(e).npost(t,n)},h.prototype.nmapply=h.prototype.npost=function(e,t){var n=B(t||[]),r=p();return n.push(r.makeNodeResolver()),this.dispatch("post",[e,n]).fail(r.reject),r.promise},f.nsend=f.nmcall=f.ninvoke=function(e,t){var n=B(arguments,2),r=p();return n.push(r.makeNodeResolver()),f(e).dispatch("post",[t,n]).fail(r.reject),r.promise},h.prototype.nsend=h.prototype.nmcall=h.prototype.ninvoke=function(e){var t=B(arguments,1),n=p();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},f.nodeify=L,h.prototype.nodeify=function(e){return e?void this.then(function(t){f.nextTick(function(){e(null,t)})},function(t){f.nextTick(function(){e(t)})}):this},f.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ae=a();return f}),!function(e,t,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define("reqwest",n):t[e]=n()}("reqwest",this,function(){function succeed(e){var t=protocolRe.exec(e.url);return t=t&&t[1]||window.location.protocol,httpsRe.test(t)?twoHundo.test(e.request.status):!!e.request.response}function handleReadyState(e,t,n){return function(){return e._aborted?n(e.request):e._timedOut?n(e.request,"Request is aborted: timeout"):void(e.request&&4==e.request[readyState]&&(e.request.onreadystatechange=noop,succeed(e)?t(e.request):n(e.request)))}}function setHeaders(e,t){var n,r=t.headers||{};r.Accept=r.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"];var o="function"==typeof FormData&&t.data instanceof FormData;t.crossOrigin||r[requestedWith]||(r[requestedWith]=defaultHeaders.requestedWith),r[contentType]||o||(r[contentType]=t.contentType||defaultHeaders.contentType);for(n in r)r.hasOwnProperty(n)&&"setRequestHeader"in e&&e.setRequestHeader(n,r[n])}function setCredentials(e,t){"undefined"!=typeof t.withCredentials&&"undefined"!=typeof e.withCredentials&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,n,r){var o=uniqid++,i=e.jsonpCallback||"callback",s=e.jsonpCallbackName||reqwest.getcallbackPrefix(o),u=new RegExp("((^|\\?|&)"+i+")=([^&]+)"),a=r.match(u),c=doc.createElement("script"),f=0,p=-1!==navigator.userAgent.indexOf("MSIE 10.0");return a?"?"===a[3]?r=r.replace(u,"$1="+s):s=a[3]:r=urlappend(r,i+"="+s),win[s]=generalCallback,c.type="text/javascript",c.src=r,c.async=!0,"undefined"==typeof c.onreadystatechange||p||(c.htmlFor=c.id="_reqwest_"+o),c.onload=c.onreadystatechange=function(){return c[readyState]&&"complete"!==c[readyState]&&"loaded"!==c[readyState]||f?!1:(c.onload=c.onreadystatechange=null,c.onclick&&c.onclick(),t(lastValue),lastValue=void 0,head.removeChild(c),void(f=1))},head.appendChild(c),{abort:function(){c.onload=c.onreadystatechange=null,n({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(c),f=1}}}function getRequest(e,t){var n,r=this.o,o=(r.method||"GET").toUpperCase(),i="string"==typeof r?r:r.url,s=r.processData!==!1&&r.data&&"string"!=typeof r.data?reqwest.toQueryString(r.data):r.data||null,u=!1;return"jsonp"!=r.type&&"GET"!=o||!s||(i=urlappend(i,s),s=null),"jsonp"==r.type?handleJsonp(r,e,t,i):(n=r.xhr&&r.xhr(r)||xhr(r),n.open(o,i,r.async===!1?!1:!0),setHeaders(n,r),setCredentials(n,r),win[xDomainRequest]&&n instanceof win[xDomainRequest]?(n.onload=e,n.onerror=t,n.onprogress=function(){},u=!0):n.onreadystatechange=handleReadyState(this,e,t),r.before&&r.before(n),u?setTimeout(function(){n.send(s)},200):n.send(s),n)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){return e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}function init(o,fn){function complete(e){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(e,t,n){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=n,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,n);complete(e)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var n,r,o,i,s=e.name,u=e.tagName.toLowerCase(),a=function(e){e&&!e.disabled&&t(s,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))};if(!e.disabled&&s)switch(u){case"input":/reset|button|image|file/i.test(e.type)||(n=/checkbox/i.test(e.type),r=/radio/i.test(e.type),o=e.value,(!(n||r)||e.checked)&&t(s,normalize(n&&""===o?"on":o)));break;case"textarea":t(s,normalize(e.value));break;case"select":if("select-one"===e.type.toLowerCase())a(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(i=0;e.length&&i<e.length;i++)e.options[i].selected&&a(e.options[i])}}function eachFormElement(){var e,t,n=this,r=function(e,t){var r,o,i;for(r=0;r<t.length;r++)for(i=e[byTag](t[r]),o=0;o<i.length;o++)serial(i[o],n)};for(t=0;t<arguments.length;t++)e=arguments[t],/input|select|textarea/i.test(e.tagName)&&serial(e,n),r(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,n){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(n)):e[t]=n},arguments),e}function buildParams(e,t,n,r){var o,i,s,u=/\[\]$/;if(isArray(t))for(i=0;t&&i<t.length;i++)s=t[i],n||u.test(e)?r(e,s):buildParams(e+"["+("object"==typeof s?i:"")+"]",s,n,r);else if(t&&"[object Object]"===t.toString())for(o in t)buildParams(e+"["+o+"]",t[o],n,r);else r(e,t)}var win=window,doc=document,httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(e.crossOrigin===!0){var t=win[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(win[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this},"catch":function(e){return this.fail(e)}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,n){e.push({name:t,value:n})},arguments),e},reqwest.serialize=function(){if(0===arguments.length)return"";var e,t,n=Array.prototype.slice.call(arguments,0);return e=n.pop(),e&&e.nodeType&&n.push(e)&&(e=null),e&&(e=e.type),t="map"==e?serializeHash:"array"==e?reqwest.serializeArray:serializeQueryString,t.apply(null,n)},reqwest.toQueryString=function(e,t){var n,r,o=t||!1,i=[],s=encodeURIComponent,u=function(e,t){t="function"==typeof t?t():null==t?"":t,i[i.length]=s(e)+"="+s(t)};if(isArray(e))for(r=0;e&&r<e.length;r++)u(e[r].name,e[r].value);else for(n in e)e.hasOwnProperty(n)&&buildParams(n,e[n],o,u);return i.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e)globalSetupOptions[t]=e[t]},reqwest}),define("OktaAuth",["q","reqwest"],function(e,t){function n(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function r(e){return atob(F(e))}function o(e,t){var o="jwk",i={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},s=!0,u=["verify"];return crypto.subtle.importKey(o,t,i,s,u).then(function(t){var o=e.split("."),s=n(o[0]+"."+o[1]),u=r(o[2]),a=n(u);return crypto.subtle.verify(i,t,a,s)})}function i(e,t){this.name="AuthApiError",this.message=e.errorSummary,this.errorSummary=e.errorSummary,this.errorCode=e.errorCode,this.errorLink=e.errorLink,this.errorId=e.errorId,this.errorCauses=e.errorCauses,t&&(this.xhr=t)}function s(e,t){this.name="AuthSdkError",this.message=e,this.errorCode="INTERNAL",this.errorSummary=e,this.errorLink="INTERNAL",this.errorId="INTERNAL",this.errorCauses=[],t&&(this.xhr=t)}function u(){this.name="AuthPollStopError",this.message="The poll was stopped by the sdk"}function a(e,t){this.name="OAuthError",this.message=t,this.errorCode=e,this.errorSummary=t}function c(e,t){if(de){var n=Array.prototype.slice.call(t);n.unshift(ce+" "),e.apply(console,n)}}function f(){return"undefined"!=typeof console&&console.log?c(console.log,arguments):void 0}function p(){return"undefined"!=typeof console&&console.error?c(console.error,arguments):void 0}function l(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return r=n.concat(r),e.apply(t,r)}}function d(e){return/^(?:[a-z]+:)?\/\//i.test(e)}function h(e){return"[object String]"===Object.prototype.toString.call(e)}function y(e){var t=e.match(/\d+/g),n=Date.UTC(t[0],t[1]-1,t[2],t[3],t[4],t[5]),r=new Date(n);return r}function m(e){var t=[];if(null!==e)for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&null!==e[n]&&t.push(n+"="+encodeURIComponent(e[n]));return t.length?"?"+t.join("&"):""}function v(e){for(var t="abcdefghijklnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n="",r=0,o=t.length;e>r;++r)n+=t[Math.floor(Math.random()*o)];return n}function g(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function w(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];null!==r&&void 0!==r&&(t[n]=r)}return t}function k(e){if(e){var t=JSON.stringify(e);if(t)return JSON.parse(t)}return e}function b(e){var t=Array.prototype.slice.call(arguments,1),n={};for(var r in e)e.hasOwnProperty(r)&&-1==t.indexOf(r)&&(n[r]=e[r]);return k(n)}function x(e,t){for(var n=e.length;n--;){var r=e[n],o=!0;for(var i in t)if(t.hasOwnProperty(i)&&r[i]!==t[i]){o=!1;break}if(o)return r}}function j(e,t,n){if(e&&e._links){var r=k(e._links[t]);return r&&r.name&&n?r.name===n?r:void 0:r}}function T(e,t,n){if(ye){var r="";n&&(r=" expires="+y(n).toUTCString()+";");var o=e+"="+t+";"+r;return f("Set cookie: "+o),document.cookie=o,o}}function A(e){if(ye){var t=new RegExp(e+"=([^;]*)"),n=document.cookie.match(t);if(n){var r=n[1];return f("Got cookie: ",r),r}}}function R(e){T(e,"","1970-01-01T00:00:00Z")}function q(e,t){var n=k(t)||{};return!n.stateToken&&e.stateToken&&(n.stateToken=e.stateToken),n}function _(e){return q(e)}function O(t,n){n&&(this.data=n,g(this,H(t,n,n,{})),delete this.stateToken,"RECOVERY_CHALLENGE"!==n.status||n._links||(this.cancel=function(){return new e(new O(t))}))}function E(e,t,n){return N(e,t,n).then(function(t){return new O(e,t)})}function S(t,n,r){return function(o){function i(){return N(t,s.href,_(n),!0,!0)}o||0===o||(o=le);var s=j(n,"next","poll");r.isPolling=!0;var a=0,c=function(){return r.isPolling?i().then(function(n){if(a=0,n.factorResult&&"WAITING"===n.factorResult){if(!r.isPolling)throw new u;return e.delay(o).then(c)}return r.isPolling=!1,new O(t,n)}).fail(function(t){if(t.xhr&&(0===t.xhr.status||429===t.xhr.status)&&4>=a){var n=1e3*Math.pow(2,a);return a++,e.delay(n).then(c)}throw t}):e.reject(new u);
};return c().fail(function(e){throw r.isPolling=!1,e})}}function C(e,t,n,r,o){if(Array.isArray(r))return function(i,u){if(!i)throw new s("Must provide a link name");var a=x(r,{name:i});if(!a)throw new s("No link found for that name");return C(e,t,n,a,o)(u)};if(r.hints&&r.hints.allow&&1===r.hints.allow.length){var i=r.hints.allow[0];switch(i){case"GET":return function(){return M(e,r.href)};case"POST":return function(i){o&&o.isPolling&&(o.isPolling=!1);var s=q(t,i);"MFA_ENROLL"===t.status&&g(s,{factorType:n.factorType,provider:n.provider});var u=r.href;return void 0!==s.rememberDevice?(s.rememberDevice&&(u+="?rememberDevice=true"),s=b(s,"rememberDevice")):s.profile&&void 0!==s.profile.updatePhone&&(s.profile.updatePhone&&(u+="?updatePhone=true"),s.profile=b(s.profile,"updatePhone")),E(e,u,s)}}}}function P(e,t,n,r){var o={};for(var i in n._links)if(n._links.hasOwnProperty(i)){var s=n._links[i];if("next"===i&&(i=s.name),s.type)o[i]=s;else switch(i){case"poll":o.poll=S(e,t,r);break;default:var u=C(e,t,n,s,r);u&&(o[i]=u)}}return o}function H(e,t,n,r){if(n=n||t,n=k(n),Array.isArray(n)){for(var o=[],i=0,s=n.length;s>i;i++)o.push(H(e,t,n[i],r));return o}var u=n._embedded||{};for(var a in u)u.hasOwnProperty(a)&&(u[a]=H(e,t,u[a],r));var c=P(e,t,n,r);return g(u,c),n=b(n,"_embedded","_links"),g(n,u),n}function I(t,n,r,o,s){var u={headers:{Accept:"application/json","Content-Type":"application/json","X-Okta-SDK":"authjs-"+ae},data:o||void 0};f("Request: ",r,n,u);var a,c;return new e(t.options.ajaxRequest(r,n,u)).then(function(e){return f("Response: ",e),c=e.responseText,h(c)&&(c=JSON.parse(c)),s||c.stateToken||R(fe),c&&c.stateToken&&c.expiresAt&&T(fe,c.stateToken,c.expiresAt),c}).fail(function(e){var n=e.responseText||{};if(h(n))try{n=JSON.parse(n)}catch(r){n={errorSummary:"Unknown error"}}throw e.status>=500&&(n.errorSummary="Unknown error"),p("Error: "+e),t.options.transformErrorXHR&&(e=t.options.transformErrorXHR(k(e))),a=new i(n,e),"E0000011"===a.errorCode&&R(fe),a})}function M(e,t,n){return t=d(t)?t:e.options.url+t,I(e,t,"GET",void 0,!n)}function N(e,t,n,r){return t=d(t)?t:e.options.url+t,I(e,t,"POST",n,r)}function D(e){var t=this;if(!(this instanceof D))return new D(e);if(!e)throw new s("OktaAuth must be provided arguments");if(!e.url)throw new s("OktaAuth must be provided a url");de=e.debug,this.options={url:e.url,clientId:e.clientId,redirectUri:e.redirectUri,ajaxRequest:e.ajaxRequest||this.ajaxRequest,transformErrorXHR:e.transformErrorXHR},"/"===this.options.url.slice(-1)&&(this.options.url=this.options.url.slice(0,-1)),t.session={close:l(oe,t,t),exists:l(ne,t,t),get:l(re,t,t),refresh:l(ie,t,t),setCookieAndRedirect:l(se,t,t)},t.tx={status:l(U,t,t),resume:l(L,t,t),exists:l(z,t,t)},t.tx.exists._getCookie=function(e){return A(e)},t.idToken={authorize:l(te,t,t),verify:l(W,t,t),refresh:l(G,t,t),decode:l(V,t)},t.idToken.authorize._getLocationHref=function(){return window.location.href},f("OktaAuth created")}function U(e,t){return t=q(this,t),N(this,e.options.url+"/api/v1/authn",t)}function L(t,n){if(!n||!n.stateToken){var r=t.tx.exists._getCookie(fe);if(!r)return e.reject(new s("No transaction to resume"));n={stateToken:r}}return t.tx.status(n).then(function(e){return new O(t,e)})}function z(e){return!!e.tx.exists._getCookie(fe)}function X(e){return M(e,e.options.url+"/.well-known/openid-configuration")}function F(e){return e.replace(/\-/g,"+").replace(/_/g,"/")}function J(e){var t=F(e);switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Not a valid Base64Url"}var n=atob(t);try{return decodeURIComponent(escape(n))}catch(r){return n}}function Q(e,t,n){if(!e||!t||!n)throw new s("The jwt, iss, and aud arguments are all required");var r=Math.floor((new Date).getTime()/1e3);if(e.iss!==t)throw new s("The issuer ["+e.iss+"] does not match ["+t+"]");if(e.aud!==n)throw new s("The audience ["+e.aud+"] does not match ["+n+"]");if(e.iat>e.exp)throw new s("The JWT expired before it was issued");if(r>e.exp)throw new s("The JWT expired and is no longer valid");if(e.iat>r)throw new s("The JWT was issued in the future")}function V(e){var t,n=e.split(".");try{t={header:JSON.parse(J(n[0])),payload:JSON.parse(J(n[1])),signature:n[2]}}catch(r){throw new s("Malformed idToken")}return t}function W(t,n,r){function i(e){var t;return t=r.expirationTime||0===r.expirationTime?r.expirationTime:Math.floor(Date.now()/1e3),e&&e>t?!0:void 0}function u(e){if(!r.audience)return!0;for(var t=Array.isArray(r.audience)?r.audience:[r.audience],n=Array.isArray(e)?e:[e],o=t.length;o--;){var i=t[o];if(-1!==n.indexOf(i))return!0}}return r=r||{},t.features.isTokenVerifySupported()?X(t).then(function(e){return M(t,e.jwks_uri)}).then(function(e){var t=e.keys[0];return o(n,t)}).then(function(e){if(!e)return!1;var o=t.idToken.decode(n);return i(o.payload.exp)?!1:u(o.payload.aud)?r.issuer&&r.issuer!==o.payload.iss?!1:!0:!1}):e.reject(new s("This browser doesn't support crypto.subtle"))}function G(t,n,r){r=r||{};try{var o=V(n);return r.clientId=o.payload.aud,r.display=r.display||null,te(t,r)}catch(i){return e.reject(i)}}function B(e,t){if("undefined"!=typeof t){var n=document.getElementById(t);return n?n:(n=document.createElement("iframe"),n.setAttribute("id",t),n.style.display="none",n.src=e,document.body.appendChild(n))}}function $(e,t){var n=t.popupTitle||"External Identity Provider User Authentication",r="toolbar=no, scrollbars=yes, resizable=yes, top=100, left=500, width=600, height=600";return window.open(e,n,r)}function K(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent("on"+t,n)}function Y(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent("on"+t,n)}function Z(t,n){function r(e){e.data&&e.origin===t.options.url&&o.resolve(e.data)}var o=e.defer();return K(window,"message",r),o.promise.timeout(n||12e4,new s("OAuth flow timed out")).fin(function(){Y(window,"message",r)})}function ee(t,n,r){function o(e){for(var t,n=e.substring(1),r={};;){if(t=c.exec(n),!t)break;var o=t[1],i=t[2];"id_token"===o?r[o]=i:r[o]=decodeURIComponent(i.replace(a," "))}return r}function i(){try{n&&n.location&&n.location.hash?u.resolve(o(n.location.hash)):n&&!n.closed&&setTimeout(i,500)}catch(e){setTimeout(i,500)}}var u=e.defer(),a=/\+/g,c=/([^&=]+)=?([^&]*)/g;return i(),u.promise.timeout(r||12e4,new s("OAuth flow timed out"))}function te(t,n,r){function o(e){if(e.error||e.error_description)throw new a(e.error,e.error_description);if(e.id_token){if(e.state!==c.state)throw new s("OAuth flow response state doesn't match request state");var n=t.idToken.decode(e.id_token);return Q(n.payload,t.options.url,c.clientId),{idToken:e.id_token,claims:n.payload}}throw new s("Unable to parse OAuth flow response")}function i(e){var t=/^(https?\:\/\/)?([^:\/?#]*(?:\:[0-9]+)?)/;return t.exec(e)[0]}function u(e){e.closed&&R.reject(new s("Unable to parse OAuth flow response"))}n||(n={}),r||(r={});var c={clientId:t.options.clientId,redirectUri:t.options.redirectUri||window.location.href,responseType:"id_token",responseMode:"okta_post_message",state:v(64),scope:["openid","email"],prompt:"none"};g(c,n);var f={prompt:"none",responseMode:"okta_post_message",display:null},p={display:"popup"};if(n.sessionToken?g(c,f):n.idp&&g(c,p),!c.clientId)throw new s("The clientId must be specified");var l=w({client_id:c.clientId,redirect_uri:c.redirectUri,response_type:c.responseType,response_mode:c.responseMode,state:c.state,prompt:c.prompt,display:c.display,sessionToken:c.sessionToken,idp:c.idp});if(-1===c.scope.indexOf("openid"))throw new s("openid scope must be specified in the scope argument");l.scope=c.scope.join(" ");var d,h=t.options.url+"/oauth2/v1/authorize"+m(l);switch(d=c.sessionToken||null===c.display?"IFRAME":"popup"===c.display?"POPUP":"IMPLICIT"){case"IFRAME":var y=Z(t,r.timeout),k=B(h,pe);return y.then(o).fin(function(){document.body.contains(k)&&k.parentElement.removeChild(k)});case"POPUP":var b;if("okta_post_message"===c.responseMode){if(!t.features.isPopupPostMessageSupported())return e.reject(new s("This browser doesn't have full postMessage support"));b=Z(t,r.timeout)}var x={popupTitle:r.popupTitle},j=$(h,x);if("fragment"===c.responseMode){var T=i(t.idToken.authorize._getLocationHref()),A=i(c.redirectUri);if(T!==A)return e.reject(new s("Using fragment, the redirectUri origin ("+A+") must match the origin of this page ("+T+")"));b=ee(t,j,r.timeout)}var R=e.defer(),q=setInterval(function(){u(j)},500);return b.then(function(e){R.resolve(e)}).fail(function(e){R.reject(e)}),R.promise.then(o).fin(function(){j.closed||(clearInterval(q),j.close())});default:return e.reject(new s("The full page redirect flow is not supported"))}}function ne(e){return e.session.get().then(function(e){return"ACTIVE"===e.status?!0:!1}).fail(function(){return!1})}function re(e){return M(e,"/api/v1/sessions/me").then(function(t){var n=b(t,"_links");return n.refresh=function(){return N(e,j(t,"refresh").href)},n.user=function(){return M(e,j(t,"user").href)},n}).fail(function(){return{status:"INACTIVE"}})}function oe(e){return I(e,"/api/v1/sessions/me","DELETE",void 0,!0)}function ie(e){return N(e,"/api/v1/sessions/me/lifecycle/refresh")}function se(e,t,n){n=n||window.location.href,window.location=e.options.url+"/login/sessionCookieRedirect"+m({checkAccountSetupComplete:!0,token:t,redirectUrl:n})}function ue(e,n,r){var o=t({url:n,method:e,headers:r.headers,data:JSON.stringify(r.data),withCredentials:!0}).then(function(){return o.request});return o}!function(){function e(e){this.message=e}var t="undefined"!=typeof exports?exports:this,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.prototype=new Error,e.prototype.name="InvalidCharacterError",t.btoa||(t.btoa=function(t){for(var r,o,i=String(t),s=0,u=n,a="";i.charAt(0|s)||(u="=",s%1);a+=u.charAt(63&r>>8-s%1*8)){if(o=i.charCodeAt(s+=.75),o>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");r=r<<8|o}return a}),t.atob||(t.atob=function(t){var r=String(t).replace(/=+$/,"");if(r.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,i,s=0,u=0,a="";i=r.charAt(u++);~i&&(o=s%4?64*o+i:i,s++%4)?a+=String.fromCharCode(255&o>>(-2*s&6)):0)i=n.indexOf(i);return a})}(),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),o=r.length>>>0;if(0===o)return-1;var i=+t||0;if(Math.abs(i)===1/0&&(i=0),i>=o)return-1;for(n=Math.max(i>=0?i:o-Math.abs(i),0);o>n;){if(n in r&&r[n]===e)return n;n++}return-1}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var ae="1.0.0",ce="[OktaAuth]",fe="oktaStateToken",pe="okta-oauth-helper-frame",le=500,de=!1,he="object"==typeof process&&"[object process]"===Object.prototype.toString.call(process),ye=!he;i.prototype=new Error,s.prototype=new Error,u.prototype=new Error,a.prototype=new Error;var me=D.prototype;return me.features={},me.features.isPopupPostMessageSupported=function(){var e=document.documentMode&&document.documentMode<10;return window.postMessage&&!e?!0:!1},me.features.isTokenVerifySupported=function(){return"undefined"!=typeof crypto&&crypto.subtle&&"undefined"!=typeof Uint8Array},me.signIn=function(e){return E(this,"/api/v1/authn",e)},me.signOut=function(){return this.session.close()},me.forgotPassword=function(e){return E(this,"/api/v1/authn/recovery/password",e)},me.unlockAccount=function(e){return E(this,"/api/v1/authn/recovery/unlock",e)},me.verifyRecoveryToken=function(e){return E(this,"/api/v1/authn/recovery/token",e)},D.prototype.ajaxRequest=ue,D}),require("OktaAuth")});